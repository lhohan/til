{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock %}
{% block description %}{{ page.summary | default(value=config.description) | striptags }}{% endblock %}
{% block og_title %}{{ page.title }}{% endblock %}
{% block og_description %}{{ page.summary | default(value=config.description) | striptags }}{% endblock %}

{% block head_extra %}
<!-- Article Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ page.title }}",
  "description": "{{ page.summary | default(value=config.description) | striptags }}",
  "datePublished": "{{ page.date | date(format="%Y-%m-%dT%H:%M:%S") }}",
  "author": {
    "@type": "Person",
    "name": "{{ config.extra.author_name }}"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ config.base_url }}{{ page.permalink }}"
  }
}
</script>
{% endblock %}

{% block content %}
<main class="container home-shell">
  <article class="til-article">
    <header class="article-header">
      <h1>{{ page.title }}</h1>
      <div class="meta">
        <time datetime="{{ page.date }}">{{ page.date | date(format="%B %d, %Y") }}</time>
        {% if page.taxonomies.topics %}
        {% for topic in page.taxonomies.topics %}
        <a href="{{ get_taxonomy_url(kind="topics", name=topic) }}" class="topic-link">{{ topic }}</a>
        {% endfor %}
        {% endif %}
      </div>
    </header>

    <div class="content">
      {{ page.content | safe }}
    </div>

    <footer class="article-footer">
      {% if page.earlier or page.later %}
      <nav class="pagination">
        {% if page.earlier %}
        <a href="{{ page.earlier.permalink }}" class="prev">&larr; {{ page.earlier.title }}</a>
        {% endif %}
        {% if page.later %}
        <a href="{{ page.later.permalink }}" class="next">{{ page.later.title }} &rarr;</a>
        {% endif %}
      </nav>
      {% endif %}
    </footer>
  </article>
</main>
{% endblock %}
